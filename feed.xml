<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.2">Jekyll</generator><link href="https://walidgharianieagle.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://walidgharianieagle.github.io/" rel="alternate" type="text/html" hreflang="en" /><updated>2023-06-25T09:24:12+00:00</updated><id>https://walidgharianieagle.github.io/feed.xml</id><title type="html">blank</title><subtitle>A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design.
</subtitle><entry><title type="html">Water Mask using SAR Sentinel-1</title><link href="https://walidgharianieagle.github.io/blog/2023/gee-water/" rel="alternate" type="text/html" title="Water Mask using SAR Sentinel-1" /><published>2023-06-24T15:59:00+00:00</published><updated>2023-06-24T15:59:00+00:00</updated><id>https://walidgharianieagle.github.io/blog/2023/gee-water</id><content type="html" xml:base="https://walidgharianieagle.github.io/blog/2023/gee-water/"><![CDATA[<p>In this tutorial, we will learn how to create a water mask using Synthetic Aperture Radar (SAR) imagery from the Sentinel-1 satellite and <a href="https://developers.google.com/earth-engine/">Google Earth engine; GEE</a>. The water mask will help us identify areas of open water within a specific region of interest. This educational simple tutorial is inspired by the one of the trainings hold by the Applied Remote Sensing Training Program <a href="https://appliedsciences.nasa.gov/what-we-do/capacity-building/arset">ARSET</a>.</p>

<h3 id="prerequisites">Prerequisites</h3>

<p>Before getting started with this tutorial, make sure you have the following:</p>

<ul>
  <li>Basic knowledge of remote sensing concepts</li>
  <li>Access to Google Earth Engine (GEE) platform</li>
  <li>Familiarity with JavaScript programming language</li>
  <li>GEE account (create one at <a href="https://earthengine.google.com/">GEE website</a>)</li>
</ul>

<p>–&gt; Once you have an account, you can start writing the code by visiting <a href="https://code.earthengine.google.com/">code.earthengine.google.com/</a>.</p>

<p>Let’s get started with the code:</p>

<h3 id="set-up-area-of-interest-aoi">Set up Area of Interest (AOI)</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">polygon</span> <span class="o">=</span> <span class="nx">ee</span><span class="p">.</span><span class="nx">Geometry</span><span class="p">.</span><span class="nc">Polygon</span><span class="p">([</span>
  <span class="p">[[</span><span class="o">-</span><span class="mf">60.31</span><span class="p">,</span><span class="o">-</span><span class="mf">4.52</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">57.81</span><span class="p">,</span><span class="o">-</span><span class="mf">4.52</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">57.81</span><span class="p">,</span><span class="o">-</span><span class="mf">2.92</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">60.31</span><span class="p">,</span><span class="o">-</span><span class="mf">2.92</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">60.31</span><span class="p">,</span><span class="o">-</span><span class="mf">4.52</span><span class="p">]]</span>
<span class="p">]);</span>

<span class="kd">var</span> <span class="nx">aoi</span> <span class="o">=</span> <span class="nx">ee</span><span class="p">.</span><span class="nc">FeatureCollection</span><span class="p">(</span><span class="nx">polygon</span><span class="p">);</span>

<span class="nb">Map</span><span class="p">.</span><span class="nf">addLayer</span><span class="p">(</span><span class="nx">aoi</span><span class="p">,</span> <span class="p">{},</span> <span class="dl">'</span><span class="s1">AOI</span><span class="dl">'</span><span class="p">);</span>
<span class="nb">Map</span><span class="p">.</span><span class="nf">centerObject</span><span class="p">(</span><span class="nx">aoi</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="get-sentinel-1-grd-data">Get Sentinel 1 GRD data</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">S1_img</span> <span class="o">=</span> <span class="nx">ee</span><span class="p">.</span><span class="nc">ImageCollection</span><span class="p">(</span><span class="dl">'</span><span class="s1">COPERNICUS/S1_GRD</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nf">eq</span><span class="p">(</span><span class="dl">'</span><span class="s1">instrumentMode</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">IW</span><span class="dl">'</span><span class="p">))</span>
    <span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nf">eq</span><span class="p">(</span><span class="dl">'</span><span class="s1">orbitProperties_pass</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">DESCENDING</span><span class="dl">'</span><span class="p">))</span>
    <span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nf">listContains</span><span class="p">(</span><span class="dl">'</span><span class="s1">transmitterReceiverPolarisation</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">VV</span><span class="dl">'</span><span class="p">))</span>
    <span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nf">listContains</span><span class="p">(</span><span class="dl">'</span><span class="s1">transmitterReceiverPolarisation</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">VH</span><span class="dl">'</span><span class="p">))</span>
    <span class="p">.</span><span class="nf">filterMetadata</span><span class="p">(</span><span class="dl">'</span><span class="s1">resolution_meters</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">equals</span><span class="dl">'</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">filterBounds</span><span class="p">(</span><span class="nx">aoi</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">filterDate</span><span class="p">(</span><span class="dl">'</span><span class="s1">2015-04-25</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">2015-04-29</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">select</span><span class="p">([</span><span class="dl">'</span><span class="s1">VV</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">VH</span><span class="dl">'</span><span class="p">])</span>
    <span class="p">.</span><span class="nf">first</span><span class="p">();</span>

<span class="nf">print</span><span class="p">(</span><span class="nx">S1_img</span><span class="p">,</span> <span class="dl">"</span><span class="s2">S1_col</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Adding the VV layer to the map</span>
<span class="nb">Map</span><span class="p">.</span><span class="nf">addLayer</span><span class="p">(</span><span class="nx">S1_img</span><span class="p">.</span><span class="nf">select</span><span class="p">([</span><span class="dl">'</span><span class="s1">VV</span><span class="dl">'</span><span class="p">]),</span> <span class="p">{</span><span class="na">min</span><span class="p">:</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="na">max</span><span class="p">:</span> <span class="o">-</span><span class="mi">7</span><span class="p">},</span> <span class="dl">'</span><span class="s1">VV no filter</span><span class="dl">'</span><span class="p">);</span>
<span class="nb">Map</span><span class="p">.</span><span class="nf">addLayer</span><span class="p">(</span><span class="nx">S1_img</span><span class="p">.</span><span class="nf">select</span><span class="p">([</span><span class="dl">'</span><span class="s1">VH</span><span class="dl">'</span><span class="p">]),</span> <span class="p">{</span><span class="na">min</span><span class="p">:</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="na">max</span><span class="p">:</span> <span class="o">-</span><span class="mi">7</span><span class="p">},</span> <span class="dl">'</span><span class="s1">VH no filter</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="apply-a-filter-to-reduce-speckle">Apply a filter to reduce speckle</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">SMOOTHING_RADIUS</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">S1</span> <span class="o">=</span> <span class="nx">S1_img</span><span class="p">.</span><span class="nf">focal_mean</span><span class="p">(</span><span class="nx">SMOOTHING_RADIUS</span><span class="p">,</span> <span class="dl">'</span><span class="s1">circle</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">meters</span><span class="dl">'</span><span class="p">).</span><span class="nf">int32</span><span class="p">();</span>
<span class="nf">print</span><span class="p">(</span><span class="nx">S1</span><span class="p">,</span> <span class="dl">'</span><span class="s1">S1</span><span class="dl">'</span><span class="p">);</span>
<span class="nb">Map</span><span class="p">.</span><span class="nf">addLayer</span><span class="p">(</span><span class="nx">S1</span><span class="p">,</span> <span class="p">{</span><span class="na">min</span><span class="p">:</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="na">max</span><span class="p">:</span> <span class="o">-</span><span class="mi">7</span><span class="p">},</span> <span class="dl">'</span><span class="s1">S1</span><span class="dl">'</span><span class="p">);</span>
<span class="nb">Map</span><span class="p">.</span><span class="nf">addLayer</span><span class="p">(</span><span class="nx">S1</span><span class="p">.</span><span class="nf">select</span><span class="p">([</span><span class="dl">'</span><span class="s1">VV</span><span class="dl">'</span><span class="p">]),</span> <span class="p">{</span><span class="na">min</span><span class="p">:</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="na">max</span><span class="p">:</span> <span class="o">-</span><span class="mi">7</span><span class="p">},</span> <span class="dl">'</span><span class="s1">VV filtered</span><span class="dl">'</span><span class="p">);</span>
<span class="nb">Map</span><span class="p">.</span><span class="nf">addLayer</span><span class="p">(</span><span class="nx">S1</span><span class="p">.</span><span class="nf">select</span><span class="p">([</span><span class="dl">'</span><span class="s1">VH</span><span class="dl">'</span><span class="p">]),</span> <span class="p">{</span><span class="na">min</span><span class="p">:</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="na">max</span><span class="p">:</span> <span class="o">-</span><span class="mi">7</span><span class="p">},</span> <span class="dl">'</span><span class="s1">VH filtered</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="display-as-a-sar-composite">Display as a SAR composite</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">VV</span> <span class="o">=</span> <span class="nx">S1</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="dl">'</span><span class="s1">VV</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">VH</span> <span class="o">=</span> <span class="nx">S1</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="dl">'</span><span class="s1">VH</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">VV_VH</span> <span class="o">=</span> <span class="nx">VV</span><span class="p">.</span><span class="nf">divide</span><span class="p">(</span><span class="nx">VH</span><span class="p">).</span><span class="nf">int32</span><span class="p">().</span><span class="nf">rename</span><span class="p">(</span><span class="dl">'</span><span class="s1">VV_VH</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">S1_composite</span> <span class="o">=</span> <span class="nx">S1</span><span class="p">.</span><span class="nf">addBands</span><span class="p">(</span><span class="nx">VV_VH</span><span class="p">);</span>

<span class="nf">print</span><span class="p">(</span><span class="nx">S1_composite</span><span class="p">,</span><span class="dl">'</span><span class="s1">S1_composite</span><span class="dl">'</span><span class="p">);</span>

<span class="nb">Map</span><span class="p">.</span><span class="nf">addLayer</span><span class="p">(</span><span class="nx">S1_composite</span> <span class="p">,</span> <span class="p">{</span><span class="na">min</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">25</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">25</span><span class="p">],</span> <span class="na">max</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">]},</span> <span class="dl">'</span><span class="s1">S1 composite</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="create-a-water-mask">Create a water mask</h2>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Applying a threshold to determine water/non-water areas:</span>
<span class="kd">var</span> <span class="nx">VH_binary</span> <span class="o">=</span> <span class="nx">S1</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="dl">'</span><span class="s1">VH</span><span class="dl">'</span><span class="p">).</span><span class="nf">gte</span><span class="p">(</span><span class="o">-</span><span class="mi">18</span><span class="p">);</span>
<span class="nb">Map</span><span class="p">.</span><span class="nf">addLayer</span><span class="p">(</span><span class="nx">VH_binary</span><span class="p">,{},</span><span class="dl">'</span><span class="s1">vh_binary</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">water_isolated</span> <span class="o">=</span> <span class="nx">VH_binary</span><span class="p">.</span><span class="nf">selfMask</span><span class="p">();</span>
<span class="nb">Map</span><span class="p">.</span><span class="nf">addLayer</span><span class="p">(</span><span class="nx">water_isolated</span><span class="p">,</span> <span class="p">{</span><span class="dl">'</span><span class="s1">palette</span><span class="dl">'</span><span class="p">:[</span><span class="dl">'</span><span class="s1">#2ca25f</span><span class="dl">'</span><span class="p">]},</span> <span class="dl">'</span><span class="s1">Water Mask</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<p>Voila!!</p>

<div class="row mt-3">
    <div class="col-sm mt-3 mt-md-0">
        <figure>

  <picture>
    
    <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/blog/24-06-2023/s1_grd-480.webp" />
    <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/blog/24-06-2023/s1_grd-800.webp" />
    <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/blog/24-06-2023/s1_grd-1400.webp" />
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/blog/24-06-2023/s1_grd.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();" />

  </picture>

</figure>

        <p class="text-center">Sentinel-1 composite.</p>
    </div>
    <div class="col-sm mt-3 mt-md-0">
        <figure>

  <picture>
    
    <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/blog/24-06-2023/water_mask-480.webp" />
    <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/blog/24-06-2023/water_mask-800.webp" />
    <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/blog/24-06-2023/water_mask-1400.webp" />
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/blog/24-06-2023/water_mask.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();" />

  </picture>

</figure>

        <p class="text-center">Water mask</p>
    </div>
</div>

<hr />
<p>References:</p>
<ul>
  <li><a href="https://appliedsciences.nasa.gov/join-mission/training/english/arset-introduction-synthetic-aperture-radar">ARSET Introduction to Synthetic Aperture Radar</a></li>
  <li><a href="https://www.youtube.com/watch?v=OwrLh7pjHRQ&amp;t=2375s">ARSET YouTube Video Tutorial</a></li>
</ul>]]></content><author><name></name></author><category term="tutorial" /><category term="cloud-computing" /><category term="remote-sensing" /><category term="JavaScript" /><summary type="html"><![CDATA[Wreate a water mask using Synthetic Aperture Radar (SAR)]]></summary></entry></feed>